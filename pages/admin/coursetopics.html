<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h2>Course:<span id="coursename"></span> </h2>
        </div>
    </div>
    <input type="hidden" id="id" class="form-control" />


    <input type="hidden" id="courseid" class="form-control" />
    <div class="row">
        <div class="col-lg-12">
            <label>Sr No</label>
            <input type="number" id="srno" class="form-control" />
        </div>
        <div class="col-lg-12">
            <label>Topic Name</label>
            <input type="text" id="topicname" class="form-control" />
        </div>
        <div class="col-lg-12"><br /></div>
        <div class="col-lg-12">
            <label>Description</label>
            <textarea id="description" class="form-control"></textarea>
        </div>
        <div class="col-lg-12"><br /></div>
        <div class="col-lg-12">
            <button onclick="save()" class="btn btn-primary">Save</button>
        </div>
    </div>
</div>

<script>
     $(document).ready(() => {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var id = url.searchParams.get("courseid");    
        let data = { data: { id: id } };
        $.ajax({
            url: "http://localhost:8081/getcourse",
            type: 'post',
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function (result) {
                data = result.data[0];
                $("#coursename").html(data.name);
            },
            error: function (err) {
                console.log(err);
            }
        })
    });

    function save() {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var courseid = url.searchParams.get("courseid");
        let id = $("#id").val();
        let name = $("#topicname").val();
        let srno = $("#srno").val();
        let description = $("#description").val();
        if (name == "") {
            $("#topicname").focus();
            return;
        }
        if (srno == "") {
            $("#srno").focus();
            return;
        }
        if (description == "") {
            $("#description").focus();
            return;
        }
        let data = { data: { id:id , courseid: courseid, topicname: name, description: description,  srno: srno } };
        $.ajax({
            url: "http://localhost:8081/savecoursetopics",
            type: 'post',
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(data),
            success: function (result) {
                window.location.replace("../admin/courses");
            },
            error: function (err) {
                console.log(err);
            }
        })
    }

    
</script>